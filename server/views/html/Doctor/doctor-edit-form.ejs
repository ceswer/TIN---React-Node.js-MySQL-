<%- include('../../header.ejs') %>

    <main>
        <!--
        <script type="application/javascript" src="/js/validationCommon.js"></script>
        <script type="application/javascript" src="/js/validationDoctorForm.js"></script>
        -->
        <h2>
            <%= pageTitle %>
        </h2>

        <form action="<%= formAction %>" method="post" class="form" novalidate onsubmit="return validateForm();">
            <input type="hidden" name="id" value="<%= doctor.id %>">

            <label for="email">Email:</label>
            <input type="text" name="email" id="Email" value="<%= errors == null ? doctor.person.email : doctor.email %>" required>
            <span id="errorName" class="errors-text"><% if(errors !=null) { if (errors.find(e=> e.path.includes('email'))) { %>
                <%= errors.find(e=> e.path.includes('email')).message %>
                    <% }} %></span>

            <label for="name">Name:</label>
            <input type="text" name="name" id="Name" value="<%= errors == null ? doctor.person.name : doctor.name %>" required>
            <span id="errorName" class="errors-text"><% if(errors !=null) { if (errors.find(e=> e.path.includes('name'))) { %>
                <%= errors.find(e=> e.path.includes('name')).message %>
                    <% }} %></span>

            <label for="middleName">MiddleName:</label>
            <input type="text" name="middleName" id="MiddleName" value="<%= errors == null ? doctor.person.middleName : doctor.middleName %>">
            <span id="errorMiddleName" class="errors-text"><% if(errors !=null) { if (errors.find(e=> e.path.includes('middleName'))) { %>
                <%= errors.find(e=> e.path.includes('middleName')).message %>
                    <% }} %></span>

            <label for="surname">Surname:</label>
            <input type="text" name="surname" id="Surname" value="<%= errors == null ? doctor.person.surname : doctor.surname %>" required>
            <span id="errorSurname" class="errors-text"><% if(errors !=null) { if (errors.find(e=> e.path.includes('surname'))) { %>
                <%= errors.find(e=> e.path.includes('surname')).message %>
                    <% }} %></span>

            <label for="dateOfBirth">Date of birth:</label>
            <input type="date" name="dateOfBirth" id="DateOfBirth"
                value="<%= errors == null ? moment(doctor.person.dateOfBirth).format('YYYY-MM-DD') : moment(doctor.dateOfBirth).format('YYYY-MM-DD')%>" required>
            <span id="errorDateOfBirth" class="errors-text"><% if(errors !=null) { if (errors.find(e=> e.path.includes('dateOfBirth'))) { %>
                <%= errors.find(e=> e.path.includes('dateOfBirth')).message %>
                    <% }} %></span>

            <label for="address">Address:</label>
            <input type="text" name="address" id="Address" value="<%= errors == null ? doctor.person.address : doctor.address %>" required>
            <span id="errorAddress" class="errors-text"><% if(errors !=null) { if (errors.find(e=> e.path.includes('address'))) { %>
                <%= errors.find(e=> e.path.includes('address')).message %>
                    <% }} %></span>

            <label for="position">Position:</label>
            <input type="text" name="position" id="Position" value="<%= doctor.position %>" required>
            <span id="errorPosition" class="errors-text"><% if(errors !=null) { if (errors.find(e=> e.path.includes('position'))) { %>
                <%= errors.find(e=> e.path.includes('position')).message %>
                    <% }} %></span>

            <label for="dateOfAcceptance">Date of acceptance:</label>
            <input type="date" name="dateOfAcceptance" id="DateOfAcceptance"
                value="<%= moment(doctor.dateOfAcceptance).format('YYYY-MM-DD') %>" required>
            <span id="errorDateOfAcceptance" class="errors-text"><% if(errors !=null) { if (errors.find(e=> e.path.includes('dateOfAcceptance'))) { %>
                <%= errors.find(e=> e.path.includes('dateOfAcceptance')).message %>
                    <% }} %></span>

            <span id="errorSummury" class="errors-text"><%= errors != null ? "There are errors!" : "" %></span>
            <div class="form-buttons">
                <input type="submit" value="Edit" class="list-actions-button-edit">
                <a href="/doctors" class="list-actions-button-details">Back</a>
            </div>
        </form>
    </main>
    <%- include('../../footer.ejs') %>